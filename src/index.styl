@require 'melon/css/base.styl'

@require 'melon/css/Mask.styl'
@require 'melon/css/Dialog.styl'
@require 'melon/css/Button.styl'
@require 'melon/css/Icon.styl'
@require 'melon/css/BoxGroup.styl'

$-melon-calendar-sizes = {
    'xxs': 30px,
    'xs': 35px
}

for level, value in $-melon-calendar-sizes
    $-size = {
        width: value,
        height: value,
        line-height: value
    }
    .variant-calendar.variant-size-{level},
        .{$-melon-class-prefix}-calendar
            &-day
                {$-size}
            &-month
                &-weekheader span
                    {$-size}


.{$-melon-class-prefix}-range-calendar,
.{$-melon-class-prefix}-calendar

    font-size: $-melon-medium-font-size
    display: inline-block
    position: relative

    border-bottom: 1px solid $-melon-colors.grey300
    transition: border-color 1s

    &-label-placeholder
        color: $-melon-colors.grey500

    & > label
        display inline-block
        font-size: 1em
        width: 100%
        cursor: pointer
        text-align: left
        line-height: 1.5em
        padding: 0.5em 0
        padding-right: 1.5em
        box-sizing: border-box

        > .{$-melon-class-prefix}-icon
            position: absolute
            right: 0
            top: 50%
            transform: translate(0, -50%)
            display: inline-block
            font-size: 1.2em
            width: @font-size

    &.state-focus > label
        border-bottom-color: $-melon-colors.blue500

    &.state-disabled > label
        color: $-melon-colors.grey400
        border-bottom-style: dotted
        cursor not-allowed

    &.state-disabled

        .{$-melon-class-prefix}-textbox.variant-calendar input
            color: $-melon-colors.lightBlack
            cursor: not-allowed

    &.state-read-only

        .{$-melon-class-prefix}-textbox.variant-calendar input
            color: $-melon-colors.darkBlack

.{$-melon-class-prefix}-dialog.variant-calendar

    .{$-melon-class-prefix}-dialog-window
        width: 20em
        border-radius: 0
        padding: 0
        padding-bottom: 0.6em

    .{$-melon-class-prefix}-dialog-body
        padding: 0

    .{$-melon-class-prefix}-dialog-actions
        margin-top: 0.6em

    .{$-melon-class-prefix}-dialog-button
        margin-right: 1.5em

    .{$-melon-class-prefix}-calendar,
    .{$-melon-class-prefix}-rangecalendar

        &-header
            background-color: $-melon-colors.cyan700
            color: $-melon-colors.white
            height: 4em
            padding: 1em 1.25em
            width: 17.5em
            cursor: pointer

            &-year
                font-size: 1.12em
                line-height: 1
                margin-bottom: 0.6em
                font-family: Roboto, sans-serif

            &-date
                display: inline-block
                font-size: 2em
                line-height: 1.266
                font-family: 'SimHei', sans-serif
                white-space: nowrap

            &-week
                display: inline-block
                font-size: 2em
                line-height: 1.266
                font-family: 'SimHei', sans-serif
                margin-right: 1em
                white-space: nowrap

        &-panel-main
            position: relative
            padding-top: 0.5em

        &-selector
            position: absolute
            top: 0
            left: 0
            right: 0
            bottom: 0
            margin-top: 0.5em
            background-color: #fff
            overflow-y: scroll

            &-item
                text-align: center
                cursor: pointer

                span
                    display: inline-block
                    width: 3.125em
                    height: 3.125em
                    line-height: 3.125em
                    color: $-melon-colors.black
                    border-radius: 100em
                    opacity: 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms
                    text-decoration: none

            &-item:hover span
                color: $-melon-colors.white
                background-color: $-melon-colors.cyan700
                opacity: 0.6

            &-item.state-selected span
                color: $-melon-colors.white
                background-color: $-melon-colors.cyan700
                opacity: 0.8

            &-item.state-disabled
                cursor: not-allowed

                span
                    color: $-melon-colors.lightBlack
                    background-color: transparent
                    cursor: not-allowed

        &-pager
            position: relative
            height: 1.875em
            line-height: 1.875em
            text-align: center

            .{$-melon-class-prefix}-icon
                position: absolute
                font-size: 1.5em
                color: $-melon-colors.darkBlack
                top: 0
                cursor: pointer

                &.state-disabled
                    color: $-melon-colors.minBlack
                    cursor: not-allowed

            [data-action='prev']
                left: 16px

            [data-action='next']
                right: 16px

        &-month

            font-size: 0.8em

            &-weekheader
                padding: 0.625em 1.25em 0 1.25em
                color: $-melon-colors.lightBlack
                clearfix()

                span
                    display: block
                    float: left
                    width: 3.125em
                    height: 3.125em
                    line-height: 3.125em
                    text-align: center

            ul
                display: block
                padding: 0.4em 1.25em 0 1.25em;

            &-week
                clearfix()
                white-space: nowrap

        &-day
            display: block
            float: left
            font-family: Roboto, sans-serif
            width: 3.125em
            height: 3.125em
            line-height: 3.125em
            text-align: center
            text-decoration: none
            color: $-melon-colors.black
            border-radius: 100em
            opacity: 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms

            &:hover
                background-color: $-melon-colors.cyan700
                color: $-melon-colors.white
                opacity: 0.6

            &:active,
            &.variant-pre-month.state-selected,
            &.variant-next-month.state-selected,
            &.state-selected
                background-color: $-melon-colors.cyan700
                color: $-melon-colors.white
                opacity: 0.8

            &.variant-pre-month.state-disabled,
            &.variant-next-month.state-disabled,
            &.state-disabled
                color: $-melon-colors.grey300
                cursor: not-allowed
                &:hover
                    background-color: transparent
                    color: inherit
                    opacity: 1
                    color: $-melon-colors.grey300

            &.variant-pre-month,
            &.variant-next-month
                color: $-melon-colors.grey500
                &:hover
                    background-color: transparent
                    color: inherit
                    opacity: 1


.{$-melon-class-prefix}-dialog.variant-range.variant-range

    .{$-melon-class-prefix}-dialog-window
        width: 40em

    .{$-melon-class-prefix}-range-calendar-row
        display: inline-block
        white-space: nowrap

    .{$-melon-class-prefix}-calendar-panel
        position: relative
        display: inline-block
